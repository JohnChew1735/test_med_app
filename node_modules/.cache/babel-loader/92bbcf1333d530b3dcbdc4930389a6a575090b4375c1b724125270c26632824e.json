{"ast":null,"code":"import _objectSpread from\"/home/project/test_med_app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from\"react\";import\"./ReviewForm.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ReviewForm=()=>{const[doctors,setDoctors]=useState([]);const[selectedDoctor,setSelectedDoctor]=useState(null);const[formData,setFormData]=useState({name:\"\",review:\"\",rating:\"\"});const[submittedReviews,setSubmittedReviews]=useState({});// Fetch doctor data\nuseEffect(()=>{const getDoctorsDetails=async()=>{try{const res=await fetch(\"https://api.npoint.io/9a5543d36f1460da2f63\");const data=await res.json();setDoctors(data);}catch(err){console.error(\"Error fetching doctors:\",err);}};getDoctorsDetails();},[]);// Handle input changes\nconst handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));};// Handle form submit\nconst handleSubmit=e=>{e.preventDefault();if(!formData.name||!formData.review||!formData.rating){alert(\"⚠️ Please fill in all fields.\");return;}setSubmittedReviews(prev=>_objectSpread(_objectSpread({},prev),{},{[selectedDoctor.key]:_objectSpread({},formData)}));setFormData({name:\"\",review:\"\",rating:\"\"});setSelectedDoctor(null);};// Close modal when clicking outside\nconst handleOutsideClick=e=>{if(e.target.classList.contains(\"modal-overlay\")){setSelectedDoctor(null);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"review-table-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Doctor Reviews\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"review-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Serial No.\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Doctor Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Speciality\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Provide Feedback\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Review Given\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:doctors.map((doctor,index)=>{const doctorKey=doctor.id||index;// ✅ ensure unique key\nreturn/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:doctor.name}),/*#__PURE__*/_jsx(\"td\",{children:doctor.speciality}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedDoctor(_objectSpread(_objectSpread({},doctor),{},{key:doctorKey})),disabled:submittedReviews[doctorKey],className:\"feedback-btn\",children:submittedReviews[doctorKey]?\"Feedback Submitted\":\"Click Here\"})}),/*#__PURE__*/_jsx(\"td\",{children:submittedReviews[doctorKey]?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"strong\",{children:submittedReviews[doctorKey].name}),\":\",\" \",submittedReviews[doctorKey].review,\" \\u2B50\",submittedReviews[doctorKey].rating]}):\"-\"})]},doctorKey);})})]}),selectedDoctor&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:handleOutsideClick,children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Leave Feedback for \",selectedDoctor.name]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Your Name:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:formData.name,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Your Review:\",/*#__PURE__*/_jsx(\"textarea\",{name:\"review\",value:formData.review,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Rating (1\\u20135):\",/*#__PURE__*/_jsxs(\"select\",{name:\"rating\",value:formData.rating,onChange:handleChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select\"}),[1,2,3,4,5].map(num=>/*#__PURE__*/_jsx(\"option\",{value:num,children:num},num))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setSelectedDoctor(null),className:\"cancel-btn\",children:\"Cancel\"})]})]})]})})]});};export default ReviewForm;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ReviewForm","doctors","setDoctors","selectedDoctor","setSelectedDoctor","formData","setFormData","name","review","rating","submittedReviews","setSubmittedReviews","getDoctorsDetails","res","fetch","data","json","err","console","error","handleChange","e","_objectSpread","target","value","handleSubmit","preventDefault","alert","prev","key","handleOutsideClick","classList","contains","className","children","map","doctor","index","doctorKey","id","speciality","onClick","disabled","onSubmit","type","onChange","required","num"],"sources":["/home/project/test_med_app/src/Components/ReviewForm/ReviewForm.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./ReviewForm.css\";\n\nconst ReviewForm = () => {\n  const [doctors, setDoctors] = useState([]);\n  const [selectedDoctor, setSelectedDoctor] = useState(null);\n  const [formData, setFormData] = useState({ name: \"\", review: \"\", rating: \"\" });\n  const [submittedReviews, setSubmittedReviews] = useState({});\n\n  // Fetch doctor data\n  useEffect(() => {\n    const getDoctorsDetails = async () => {\n      try {\n        const res = await fetch(\"https://api.npoint.io/9a5543d36f1460da2f63\");\n        const data = await res.json();\n        setDoctors(data);\n      } catch (err) {\n        console.error(\"Error fetching doctors:\", err);\n      }\n    };\n    getDoctorsDetails();\n  }, []);\n\n  // Handle input changes\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  // Handle form submit\n    const handleSubmit = (e) => {\n    e.preventDefault();\n\n    if (!formData.name || !formData.review || !formData.rating) {\n        alert(\"⚠️ Please fill in all fields.\");\n        return;\n    }\n\n    setSubmittedReviews((prev) => ({\n    ...prev,\n    [selectedDoctor.key]: { ...formData },\n    }));\n\n\n    setFormData({ name: \"\", review: \"\", rating: \"\" });\n    setSelectedDoctor(null);\n    };\n\n\n  // Close modal when clicking outside\n  const handleOutsideClick = (e) => {\n    if (e.target.classList.contains(\"modal-overlay\")) {\n      setSelectedDoctor(null);\n    }\n  };\n\n  return (\n    <div className=\"review-table-container\">\n      <h2>Doctor Reviews</h2>\n      <table className=\"review-table\">\n        <thead>\n          <tr>\n            <th>Serial No.</th>\n            <th>Doctor Name</th>\n            <th>Speciality</th>\n            <th>Provide Feedback</th>\n            <th>Review Given</th>\n          </tr>\n        </thead>\n        <tbody>\n        {doctors.map((doctor, index) => {\n            const doctorKey = doctor.id || index; // ✅ ensure unique key\n            return (\n            <tr key={doctorKey}>\n                <td>{index + 1}</td>\n                <td>{doctor.name}</td>\n                <td>{doctor.speciality}</td>\n                <td>\n                <button\n                    onClick={() => setSelectedDoctor({ ...doctor, key: doctorKey })}\n                    disabled={submittedReviews[doctorKey]}\n                    className=\"feedback-btn\"\n                >\n                    {submittedReviews[doctorKey]\n                    ? \"Feedback Submitted\"\n                    : \"Click Here\"}\n                </button>\n                </td>\n                <td>\n                {submittedReviews[doctorKey] ? (\n                    <>\n                    <strong>{submittedReviews[doctorKey].name}</strong>:{\" \"}\n                    {submittedReviews[doctorKey].review} ⭐\n                    {submittedReviews[doctorKey].rating}\n                    </>\n                ) : (\n                    \"-\"\n                )}\n                </td>\n            </tr>\n            );\n        })}\n        </tbody>\n      </table>\n\n      {/* Modal popup for feedback */}\n      {selectedDoctor && (\n        <div className=\"modal-overlay\" onClick={handleOutsideClick}>\n          <div className=\"modal-content\">\n            <h3>Leave Feedback for {selectedDoctor.name}</h3>\n            <form onSubmit={handleSubmit}>\n              <label>\n                Your Name:\n                <input\n                  type=\"text\"\n                  name=\"name\"\n                  value={formData.name}\n                  onChange={handleChange}\n                  required\n                />\n              </label>\n\n              <label>\n                Your Review:\n                <textarea\n                  name=\"review\"\n                  value={formData.review}\n                  onChange={handleChange}\n                  required\n                />\n              </label>\n\n              <label>\n                Rating (1–5):\n                <select\n                  name=\"rating\"\n                  value={formData.rating}\n                  onChange={handleChange}\n                  required\n                >\n                  <option value=\"\">Select</option>\n                  {[1, 2, 3, 4, 5].map((num) => (\n                    <option key={num} value={num}>\n                      {num}\n                    </option>\n                  ))}\n                </select>\n              </label>\n\n              <div className=\"form-buttons\">\n                <button type=\"submit\">Submit</button>\n                <button\n                  type=\"button\"\n                  onClick={() => setSelectedDoctor(null)}\n                  className=\"cancel-btn\"\n                >\n                  Cancel\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ReviewForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}